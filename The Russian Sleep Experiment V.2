local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local Window = Library.CreateLib("Russian Sleep Experiment V.2", "Ocean")

--Variables
AnnoyServer = true

--Functions

--MAIN
function BringAllSubjects()
    for i,v in pairs(game.Workspace.Rooms:GetDescendants()) do
        if v:IsA("Model") then
            if v.Parent.Name == "Human" then
                local Subject = v

                --Cuffs
                local args = {
                    [1] = "Cuff",
                    [2] = Subject.HumanoidRootPart}
                game:GetService("Players").LocalPlayer.Character:FindFirstChild("Detain Cuffs").RemoteEvent:FireServer(unpack(args))
                wait(0.5)

                --Uncuffs
                local args = {
                    [1] = "UnCuff",
                    [2] = Subject.HumanoidRootPart}
                game:GetService("Players").LocalPlayer.Character:FindFirstChild("Detain Cuffs").RemoteEvent:FireServer(unpack(args))
            end
        end
    end
end
function AnnoyTheServer()
    AnnoyServer = true
    while AnnoyServer == true do
        wait(0.1)
        for i,v in pairs(game.Workspace:GetDescendants()) do
            if v:IsA("ClickDetector") then
                fireclickdetector(v)
            end
        end
    end
end
function Respawn()
    game:GetService("ReplicatedStorage").sh2:FireServer()
end

--TELEPORT
function TPBreakRoom()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-98.5587006, 4.00000238, 205.932281, 0.0343985818, 5.75625521e-08, 0.999408185, -5.77208823e-08, 1, -5.56099451e-08, -0.999408185, -5.57738176e-08, 0.0343985818)
end
function TPResearchLab()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-13.6448221, 4.00000381, 230.557327, -0.999832511, 1.0779492e-08, 0.0183030944, 1.09274225e-08, 1, 7.98225486e-09, -0.0183030944, 8.18092349e-09, -0.999832511)
end
function TPVirusBlock()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-27.2172375, 4.09994745, 204.386887, 0.0266731121, -3.80360987e-08, -0.99964422, 4.09817069e-08, 1, -3.69561377e-08, 0.99964422, -3.99813906e-08, 0.0266731121)
end
function TPVirusStorage()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-84.5999985, 4.00000381, 230.978607, -0.998835325, 4.57153035e-08, -0.0482488275, 4.71601567e-08, 1, -2.88075164e-08, 0.0482488275, -3.10493888e-08, -0.998835325)
end
function TPCenter()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-54.0430717, 4.10008907, 204.86235, -0.00495845173, -1.08529106e-08, -0.999987721, 1.3860193e-09, 1, -1.08599165e-08, 0.999987721, -1.43985068e-09, -0.00495845173)
end
function TPRoad()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-53.5156746, 4.00000715, 342.933319, 0.999819815, -1.62418701e-09, -0.0189816914, -1.89993143e-11, 1, -8.65667218e-08, 0.0189816914, 8.65514878e-08, 0.999819815)
end
function TPControlRoom()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-26.1734848, 4.00000381, 268.555725, -0.0208309535, -3.60727108e-11, -0.999783039, 1.54278881e-11, 1, -3.64019891e-11, 0.999783039, -1.61828276e-11, -0.0208309535)
end
function TPFrontDesk()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-53.6617813, 4.00000238, 255.05159, 0.999743402, 3.68582214e-08, 0.0226513911, -3.54866252e-08, 1, -6.09543491e-08, -0.0226513911, 6.01348873e-08, 0.999743402)
end


--PLAYER
function EnableClickTP()
    -- Ctrl-Click TP
    -- Useful for getting around, pretending to be sans, etc

    local Plr = game:GetService("Players").LocalPlayer
    local Mouse = Plr:GetMouse()

    Mouse.Button1Down:connect(function()
        if not game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.LeftControl) then return end
        if not Mouse.Target then return end
        Plr.Character:MoveTo(Mouse.Hit.p)
    end)
end

--VISUAL
function DestroyGlass()
    for i,v in pairs(game.Workspace:GetDescendants()) do
        if v.Name == "BreakableGlass" then
            v:Destroy()
        end
    end
end
function EnableFullLight()
    if not _G.FullBrightExecuted then

        _G.FullBrightEnabled = false

        _G.NormalLightingSettings = {
            Brightness = game:GetService("Lighting").Brightness,
            ClockTime = game:GetService("Lighting").ClockTime,
            FogEnd = game:GetService("Lighting").FogEnd,
            GlobalShadows = game:GetService("Lighting").GlobalShadows,
            Ambient = game:GetService("Lighting").Ambient
        }

        game:GetService("Lighting"):GetPropertyChangedSignal("Brightness"):Connect(function()
            if game:GetService("Lighting").Brightness ~= 1 and game:GetService("Lighting").Brightness ~= _G.NormalLightingSettings.Brightness then
                _G.NormalLightingSettings.Brightness = game:GetService("Lighting").Brightness
                if not _G.FullBrightEnabled then
                    repeat
                        wait()
                    until _G.FullBrightEnabled
                end
                game:GetService("Lighting").Brightness = 1
            end
        end)

        game:GetService("Lighting"):GetPropertyChangedSignal("ClockTime"):Connect(function()
            if game:GetService("Lighting").ClockTime ~= 12 and game:GetService("Lighting").ClockTime ~= _G.NormalLightingSettings.ClockTime then
                _G.NormalLightingSettings.ClockTime = game:GetService("Lighting").ClockTime
                if not _G.FullBrightEnabled then
                    repeat
                        wait()
                    until _G.FullBrightEnabled
                end
                game:GetService("Lighting").ClockTime = 12
            end
        end)

        game:GetService("Lighting"):GetPropertyChangedSignal("FogEnd"):Connect(function()
            if game:GetService("Lighting").FogEnd ~= 786543 and game:GetService("Lighting").FogEnd ~= _G.NormalLightingSettings.FogEnd then
                _G.NormalLightingSettings.FogEnd = game:GetService("Lighting").FogEnd
                if not _G.FullBrightEnabled then
                    repeat
                        wait()
                    until _G.FullBrightEnabled
                end
                game:GetService("Lighting").FogEnd = 786543
            end
        end)

        game:GetService("Lighting"):GetPropertyChangedSignal("GlobalShadows"):Connect(function()
            if game:GetService("Lighting").GlobalShadows ~= false and game:GetService("Lighting").GlobalShadows ~= _G.NormalLightingSettings.GlobalShadows then
                _G.NormalLightingSettings.GlobalShadows = game:GetService("Lighting").GlobalShadows
                if not _G.FullBrightEnabled then
                    repeat
                        wait()
                    until _G.FullBrightEnabled
                end
                game:GetService("Lighting").GlobalShadows = false
            end
        end)

        game:GetService("Lighting"):GetPropertyChangedSignal("Ambient"):Connect(function()
            if game:GetService("Lighting").Ambient ~= Color3.fromRGB(178, 178, 178) and game:GetService("Lighting").Ambient ~= _G.NormalLightingSettings.Ambient then
                _G.NormalLightingSettings.Ambient = game:GetService("Lighting").Ambient
                if not _G.FullBrightEnabled then
                    repeat
                        wait()
                    until _G.FullBrightEnabled
                end
                game:GetService("Lighting").Ambient = Color3.fromRGB(178, 178, 178)
            end
        end)

        game:GetService("Lighting").Brightness = 1
        game:GetService("Lighting").ClockTime = 12
        game:GetService("Lighting").FogEnd = 786543
        game:GetService("Lighting").GlobalShadows = false
        game:GetService("Lighting").Ambient = Color3.fromRGB(178, 178, 178)

        local LatestValue = true
        spawn(function()
            repeat
                wait()
            until _G.FullBrightEnabled
            while wait() do
                if _G.FullBrightEnabled ~= LatestValue then
                    if not _G.FullBrightEnabled then
                        game:GetService("Lighting").Brightness = _G.NormalLightingSettings.Brightness
                        game:GetService("Lighting").ClockTime = _G.NormalLightingSettings.ClockTime
                        game:GetService("Lighting").FogEnd = _G.NormalLightingSettings.FogEnd
                        game:GetService("Lighting").GlobalShadows = _G.NormalLightingSettings.GlobalShadows
                        game:GetService("Lighting").Ambient = _G.NormalLightingSettings.Ambient
                    else
                        game:GetService("Lighting").Brightness = 1
                        game:GetService("Lighting").ClockTime = 12
                        game:GetService("Lighting").FogEnd = 786543
                        game:GetService("Lighting").GlobalShadows = false
                        game:GetService("Lighting").Ambient = Color3.fromRGB(178, 178, 178)
                    end
                    LatestValue = not LatestValue
                end
            end
        end)
    end

    _G.FullBrightExecuted = true
    _G.FullBrightEnabled = not _G.FullBrightEnabled
end

--Tabs
local MainTab = Window:NewTab("Main")
local VisualTab = Window:NewTab("Visuals")
local TeleportTab = Window:NewTab("Teleports")
local PlayerTab = Window:NewTab("Player")

--Sections
local MainSection = MainTab:NewSection("Main")
local VisualSection = VisualTab:NewSection("Visuals")
local TeleportSection = TeleportTab:NewSection("Teleports")
local PlayerSection = PlayerTab:NewSection("Player")

--Main contents
MainSection:NewButton("Bring all subjects (EQUIP CUFFS)", "Brings all the subjects in the game", function()
    BringAllSubjects()
end)
MainSection:NewButton("Respawn", "You respawn when press this", function()
    Respawn()
end)
MainSection:NewToggle("Annoy Server (FIRES CLICK DETECTORS)", "Annoys the fuck out of the server!", function(state)
    if state then
        AnnoyTheServer()
    else
        AnnoyServer = false
    end
end)

--Teleport contents
TeleportSection:NewButton("Break Room", "Teleports you to the break room", function()
    TPBreakRoom()
end)
TeleportSection:NewButton("Research Lab", "Teleports you to the research lab", function()
    TPResearchLab()
end)
TeleportSection:NewButton("Virus Block", "Teleports you to the virus block", function()
    TPVirusBlock()
end)
TeleportSection:NewButton("Virus Storage", "Teleports you to the virus storage room", function()
    TPVirusStorage()
end)
TeleportSection:NewButton("Center", "Teleports you to the center", function()
    TPCenter()
end)
TeleportSection:NewButton("Road", "Teleports you to the middle of the road", function()
    TPRoad()
end)
TeleportSection:NewButton("Control Room", "Teleports you to the control room", function()
    TPControlRoom()
end)
TeleportSection:NewButton("Front Desk", "Teleports you to the Front Desk", function()
    TPFrontDesk()
end)


--Player contents
PlayerSection:NewButton("Ctrl-Click TP", "Enables Ctrl-Click TP", function()
    EnableClickTP()
end)
PlayerSection:NewSlider("WalkSpeed", "SliderInfo", 200, 16, function(s) -- 200 (MaxValue) | 0 (MinValue)
    game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = s
end)

--Visual contents
VisualSection:NewButton("Destroy Glass", "Destroys all room glass", function()
    DestroyGlass()
end)
VisualSection:NewButton("Full Light", "Enables full light", function()
    EnableFullLight()
end)
